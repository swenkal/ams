section.slice.py-5.bg-section-secondary
  .container
    .row
      .col-lg-2
        .mb-4
          include filter_disciplines.pug
      .col-lg-10
        .row.align-items-center.mb-4.ml-4
          .col
            h1.h5.mb-0 Дисциплины
          if userInfo.securityRole.includes("superadmin") || userInfo.securityRole.includes("teacher")
            a(href="/disciplines/create/")  
              .col-auto
                button.btn.btn-sm.btn-primary.btn-icon(type='button')
                  span.btn-inner--text Новая дисциплина
                  span.btn-inner--icon
                    i(data-feather='plus')
        .row.align-items-center.mb-4.ml-4
          .col
            .input-group.input-group-merge
              input#search.form-control.form-control-prepend(type='text', name="search", placeholder='Поиск по дисциплинам')
              .input-group-prepend
                  span.input-group-text
                    i(data-feather='search')
              a#cleanerText
                i(data-feather='x')
        .row.align-items-center.mb-4.ml-4
          .col
            h1.h5.mb-0 Ваши
        .row.ml-4.mr-n2
          each disc in teacherDisciplines  
            .col-sm-6.col-lg-4.px-2
              .card.mb-3(style="min-width: 175px; min-height: 150px")
                
                .card-header.pb-3
                  .d-flex.justify-content-between.align-items-center
                    a.action-item.mr-2(href=urlDiscDetail+disc.allias+"/")
                      h6.mb-0 #{disc.mnemo}
                    a.action-item.mr-2(href="/analytics/"+disc.allias+"/")
                      i(data-feather='bar-chart-2')
                a.action-item.mr-2(href=urlDiscDetail+disc.allias+"/")  
                  .card-body.pt-0.pb-3.mb-0
                    .mt-1
                      p.mb-2.text-sm.text-muted #{disc.name}
                      -let teachersInfo;
                      -teachersInfo = disc.editorsInfo.map(editor => {return `${editor.lastName} ${editor.name.substr(0,1)}. ${editor.fatherName.substr(0,1)}.`})
                      if teachersInfo.length > 1
                        p.mb-0.text-sm.font-weight-bold #{teachersInfo.join(", ")}
                      else
                        p.mb-0.text-sm.font-weight-bold #{teachersInfo.join("")}
                  .card-footer.pl-4.pr-2.py-1.mt-0  
                    .row.my-0.ml-1
                      for group in disc.groupsInfo
                        p.badge.badge-primary.badge-pill.px-2.text-center.my-1.mr-1  #{group.fullname}
                        label(hidden="true") #{group.typeEducation}, #{group.course} курс
          else 
            p Дисциплин пока ещё нет.
        .row.align-items-center.mb-4.ml-4
          .col
            h1.h5.mb-0 Другие
        .row.ml-4.mr-n2
          each otherDisc in otherDisciplines 
            .col-sm-6.col-lg-4.px-2
              .card.mb-3(style="min-width: 175px; min-height: 150px")
                a.action-item.mr-2(href=urlDiscDetail+otherDisc.allias+"/")
                  .card-header.pb-3
                    .d-flex.justify-content-between.align-items-center
                      div
                        h6.mb-0 #{otherDisc.mnemo}
                  .card-body.pt-0.pb-3.mb-0
                    .mt-1
                      p.mb-2.text-sm.text-muted #{otherDisc.name}
                      -let teachersInfo;
                      -teachersInfo = otherDisc.editorsInfo.map(editor => {return `${editor.lastName} ${editor.name.substr(0,1)}. ${editor.fatherName.substr(0,1)}.`})
                      if teachersInfo.length > 1
                        p.mb-0.text-sm.font-weight-bold #{teachersInfo.join(", ")}
                      else
                        p.mb-0.text-sm.font-weight-bold #{teachersInfo.join("")}
                  .card-footer.pl-4.pr-2.py-1.mt-0  
                    .row.my-0.ml-1
                      for group in otherDisc.groupsInfo
                        p.badge.badge-primary.badge-pill.px-2.text-center.my-1.mr-1  #{group.fullname}
                        label(hidden="true") #{group.typeEducation}, #{group.course} курс
          else 
            p Дисциплин пока ещё нет.
